<!DOCTYPE html>
<html>
<head>
    <title>AI Construction Planning System</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        label {
            display: block;
            margin-top: 10px;
        }
        input, select {
            width: 200px;
            padding: 6px;
        }
        button {
            margin-top: 15px;
            padding: 8px 16px;
            cursor: pointer;
        }
        pre {
            margin-top: 20px;
            background: #f4f4f4;
            padding: 15px;
        }
    </style>
</head>

<body>

<h2>AI-Based Construction Planning System</h2>

<label>Area (sqft)</label>
<input type="number" id="area" placeholder="Enter area" required>

<label>Number of Floors</label>
<input type="number" id="floors" placeholder="Enter floors" required>

<label>Material Type</label>
<select id="material">
    <option value="">Select material</option>
    <option value="standard">Standard</option>
    <option value="premium">Premium</option>
</select>

<label>Number of Workers</label>
<input type="number" id="workers" placeholder="Enter workers" required>

<label>Project Duration (months)</label>
<input type="number" id="duration" placeholder="Enter duration" required>

<button onclick="generatePlan()">Generate Plan</button>

<h3>Result</h3>
<pre id="output">Waiting for input...</pre>

<script>
async function generatePlan() {

    // -------- Read User Inputs --------
    const area = document.getElementById("area").value;
    const floors = document.getElementById("floors").value;
    const material = document.getElementById("material").value;
    const workers = document.getElementById("workers").value;
    const duration = document.getElementById("duration").value;

    // -------- Basic Validation --------
    if (!area || !floors || !material || !workers || !duration) {
        alert("Please fill all fields");
        return;
    }

    // -------- Create JSON --------
    const data = {
        area_sqft: Number(area),
        floors: Number(floors),
        material_type: material,
        workers: Number(workers),
        duration_months: Number(duration)
    };

    // -------- Send to Backend --------
    try {
        const response = await fetch("http://127.0.0.1:5000/plan", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(data)
        });

        const result = await response.json();
        document.getElementById("output").textContent =
            JSON.stringify(result, null, 2);

    } catch (error) {
        document.getElementById("output").textContent =
            "Error connecting to backend. Is Flask running?";
    }
}
</script>

</body>
</html>